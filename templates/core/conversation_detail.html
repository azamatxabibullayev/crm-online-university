{% extends 'core/base.html' %}
{% block content %}
<h4>Conversation</h4>

<div id="messages" style="height: 300px; overflow-y: scroll; border: 1px solid #ccc; padding: 10px;">
  {% for msg in messages %}
    <div class="mb-2">
      <strong>{{ msg.sender.get_full_name|default:msg.sender.username }}</strong>
      <small class="text-muted">{{ msg.timestamp|date:"Y-m-d H:i" }}</small>
      <p>{{ msg.content|linebreaks }}</p>
    </div>
  {% empty %}
    <p>No messages yet.</p>
  {% endfor %}
</div>

<form method="post" class="mt-3">
  {% csrf_token %}
  {{ form.as_p }}
  <button type="submit" class="btn btn-primary">Send</button>
  <a href="{% url 'conversation_list' %}" class="btn btn-secondary">Back</a>
</form>
{% endblock %}
