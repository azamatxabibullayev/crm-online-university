{% extends 'core/base.html' %}
{% block content %}
<h3>Message Moderation</h3>
<table class="table table-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Sender</th>
      <th>Content</th>
      <th>Timestamp</th>
      <th>Tagged</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for msg in messages %}
    <tr>
      <td>{{ msg.id }}</td>
      <td>{{ msg.sender.username }}</td>
      <td>{{ msg.content|truncatewords:10 }}</td>
      <td>{{ msg.timestamp|date:"Y-m-d H:i" }}</td>
      <td>{% if msg.is_tagged %}✔️{% else %}❌{% endif %}</td>
      <td>
        <a href="{% url 'delete_message' msg.id %}" class="btn btn-danger btn-sm">Delete</a>
        <a href="{% url 'tag_message' msg.id %}" class="btn btn-warning btn-sm">{% if msg.is_tagged %}Untag{% else %}Tag{% endif %}</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6">No messages to moderate.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
